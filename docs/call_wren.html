<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Call Wren and pass around variables | Wren Bind c++17</title>
    <meta name="description" content="Wren language binding library for C++17">
    
    
    <link rel="preload" href="/wrenbind17/assets/css/0.styles.81e95383.css" as="style"><link rel="preload" href="/wrenbind17/assets/js/app.e6ecd826.js" as="script"><link rel="preload" href="/wrenbind17/assets/js/2.8d7926a2.js" as="script"><link rel="preload" href="/wrenbind17/assets/js/7.3e313d7e.js" as="script"><link rel="prefetch" href="/wrenbind17/assets/js/10.0b58e701.js"><link rel="prefetch" href="/wrenbind17/assets/js/11.30fc4ffe.js"><link rel="prefetch" href="/wrenbind17/assets/js/12.29ea8eab.js"><link rel="prefetch" href="/wrenbind17/assets/js/13.67b5eb9e.js"><link rel="prefetch" href="/wrenbind17/assets/js/14.513db919.js"><link rel="prefetch" href="/wrenbind17/assets/js/15.bd6938d9.js"><link rel="prefetch" href="/wrenbind17/assets/js/16.4b3ec8c6.js"><link rel="prefetch" href="/wrenbind17/assets/js/3.8fb6d65f.js"><link rel="prefetch" href="/wrenbind17/assets/js/4.0c63175a.js"><link rel="prefetch" href="/wrenbind17/assets/js/5.a4bf3ff4.js"><link rel="prefetch" href="/wrenbind17/assets/js/6.351e486f.js"><link rel="prefetch" href="/wrenbind17/assets/js/8.d21a7244.js"><link rel="prefetch" href="/wrenbind17/assets/js/9.cec8846a.js">
    <link rel="stylesheet" href="/wrenbind17/assets/css/0.styles.81e95383.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wrenbind17/" class="home-link router-link-active"><!----> <span class="site-name">Wren Bind c++17</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wrenbind17/" class="nav-link">Home</a></div><div class="nav-item"><a href="/wrenbind17/docs/tutorial.html" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/wrenbind17/docs/doxygen/modules.html" class="nav-link">Modules</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Classes</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/annotated.html" class="nav-link">Class List</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/classes.html" class="nav-link">Class Index</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/hierarchy.html" class="nav-link">Class Hierarchy</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_members.html" class="nav-link">Class Members</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_member_functions.html" class="nav-link">Class Member Functions</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_member_variables.html" class="nav-link">Class Member Variables</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_member_typedefs.html" class="nav-link">Class Member Typedefs</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_member_enums.html" class="nav-link">Class Member Enumerations</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Namespaces</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespaces.html" class="nav-link">Namespace List</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_members.html" class="nav-link">Namespace Members</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_member_functions.html" class="nav-link">Namespace Member Functions</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_member_variables.html" class="nav-link">Namespace Member Variables</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_member_typedefs.html" class="nav-link">Namespace Member Typedefs</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_member_enums.html" class="nav-link">Namespace Member Enumerations</a></li></ul></div></div><div class="nav-item"><a href="/wrenbind17/docs/doxygen/files.html" class="nav-link">Files</a></div><div class="nav-item"><a href="/wrenbind17/docs/doxygen/pages.html" class="nav-link">Pages</a></div><div class="nav-item"><a href="/wrenbind17/docs/doxygen/bug.html" class="nav-link">Bugs</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wrenbind17/" class="nav-link">Home</a></div><div class="nav-item"><a href="/wrenbind17/docs/tutorial.html" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/wrenbind17/docs/doxygen/modules.html" class="nav-link">Modules</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Classes</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/annotated.html" class="nav-link">Class List</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/classes.html" class="nav-link">Class Index</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/hierarchy.html" class="nav-link">Class Hierarchy</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_members.html" class="nav-link">Class Members</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_member_functions.html" class="nav-link">Class Member Functions</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_member_variables.html" class="nav-link">Class Member Variables</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_member_typedefs.html" class="nav-link">Class Member Typedefs</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/class_member_enums.html" class="nav-link">Class Member Enumerations</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Namespaces</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespaces.html" class="nav-link">Namespace List</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_members.html" class="nav-link">Namespace Members</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_member_functions.html" class="nav-link">Namespace Member Functions</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_member_variables.html" class="nav-link">Namespace Member Variables</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_member_typedefs.html" class="nav-link">Namespace Member Typedefs</a></li><li class="dropdown-item"><!----> <a href="/wrenbind17/docs/doxygen/namespace_member_enums.html" class="nav-link">Namespace Member Enumerations</a></li></ul></div></div><div class="nav-item"><a href="/wrenbind17/docs/doxygen/files.html" class="nav-link">Files</a></div><div class="nav-item"><a href="/wrenbind17/docs/doxygen/pages.html" class="nav-link">Pages</a></div><div class="nav-item"><a href="/wrenbind17/docs/doxygen/bug.html" class="nav-link">Bugs</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Call Wren and pass around variables</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wrenbind17/docs/call_wren.html#example" class="sidebar-link">Example</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/wrenbind17/docs/call_wren.html#types-you-can-pass-around" class="sidebar-link">Types you can pass around</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="call-wren-and-pass-around-variables"><a href="#call-wren-and-pass-around-variables" aria-hidden="true" class="header-anchor">#</a> Call Wren and pass around variables</h1> <h2 id="example"><a href="#example" aria-hidden="true" class="header-anchor">#</a> Example</h2> <p>Consider the following program below:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;wrenbind17/wrenbind17.hpp&gt;</span></span>
<span class="token keyword">namespace</span> wren <span class="token operator">=</span> wrenbind17<span class="token punctuation">;</span> <span class="token comment">// Alias</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> std<span class="token operator">::</span>string code <span class="token operator">=</span> <span class="token raw-string string">R&quot;(
        class Utils {
            static add(x, b) {
                return x + b
            }
        }
    )&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// Create new VM</span>
    wren<span class="token operator">::</span>VM vm<span class="token punctuation">;</span>

    <span class="token comment">// Runs the code from the std::string as a &quot;main&quot; module</span>
    vm<span class="token punctuation">.</span><span class="token function">runFromSource</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Find class Main in module main</span>
    wren<span class="token operator">::</span>Variable mainClass <span class="token operator">=</span> vm<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Find function main() in class Main</span>
    wren<span class="token operator">::</span>Method add <span class="token operator">=</span> mainClass<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token string">&quot;add(_, _)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Execute the function</span>
    wren<span class="token operator">::</span>ReturnValue res <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Checks if the return value is an integer</span>
    <span class="token comment">// In Wren, integers, floats, longs, doubles, are all the same!</span>
    res<span class="token punctuation">.</span>is<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// returns true</span>
    res<span class="token punctuation">.</span>is<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// returns true</span>
    res<span class="token punctuation">.</span>is<span class="token operator">&lt;</span><span class="token keyword">nullptr</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// returns false</span>
    res<span class="token punctuation">.</span>is<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns false</span>

    <span class="token comment">// Prints 30</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Result: &quot;</span> <span class="token operator">&lt;&lt;</span> res<span class="token punctuation">.</span>as<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Too call the correct method, you first have to find the class inside of a specific module. When executing a piece of code, you specify the name of the module, in this case <code>main</code>. Then, after the code has been executed, all of the classes and variables are defined in the VM of that particular module. So, we first have to find the class. This can be done by calling <code>wren::VM::find(module_name, class_name)</code>. Then, we can find any specific function we want by calling <code>wren::Variable::func(signature)</code>. The signature you pass into the <code>func</code> must match the correct Wren method. Signatures such as <code>add()</code> nor <code>add(_)</code> won't work, because the Wren function has two arguments. Only <code>add(_, _)</code> will work. If the signature is invalid, or the method simply does not exist, an exception <code>wren::NotFound</code> is thrown.</p> <p>Passing variables to Wren is simply done by passing the variables into the <code>operator(...)</code>. If the number of variables does not match the signature, it will throw an exception <code>wren::Exception</code>. The result of the execution is capured as <code>wren::ReturnValue</code>. This can hold anything from nullptr up to a C++ class. To check the contents, simply call the <code>is&lt;...&gt;()</code> method, or you get the contents, call the <code>as&lt;...&gt;()</code> method.</p> <div class="warning custom-block"><p>Warning!</p> <p>The <code>wren::Variable</code>, <code>wren::Method</code>, and <code>wren::ReturnValue</code> contain handles from Wren that extend the liveness of the variables/methods they hold. You must dispose of them before the VM shuts down. Otherwise the destructor of these classes may cause undefined behavior, even a segmentation fault. Be sure that <code>wren::VM</code> is the last thing to be destroyed.</p></div> <h2 id="types-you-can-pass-around"><a href="#types-you-can-pass-around" aria-hidden="true" class="header-anchor">#</a> Types you can pass around</h2> <p>You can pass around any integer between 8 and 64 bits (int8, uint8, int, short, char, unsigned char, etc...), floats, doubles, booleans, and std::strings. These are simple types and will be represented as Wren's built in types. But, Wren has only 64-bit floating point (double). It does not have integers. Therefore, all integers are converted to doubles. Any other types (C++ classes) must be explicitly added to Wren. (<a href="/wrenbind17/docs/bind_cpp_class.html">see this guide</a>)</p> <div class="warning custom-block"><p>Warning!</p> <p>Don't use const char*! It will result in compilation error or it will just thrown a bad cast exception during runtime. Use std::string.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wrenbind17/assets/js/app.e6ecd826.js" defer></script><script src="/wrenbind17/assets/js/2.8d7926a2.js" defer></script><script src="/wrenbind17/assets/js/7.3e313d7e.js" defer></script>
  </body>
</html>
